(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;b=a.med=a.med||{};c=b.Client=b.Client||{};d=c.Species=c.Species||{};e=c.Pet=c.Pet||{};f=a.IntelliFactory;g=f&&f.Runtime;h=a.WebSharper;i=h&&h.Forms;j=i&&i.Form;k=h&&h.UI;l=k&&k.Doc;m=k&&k.AttrProxy;n=k&&k.AttrModule;o=i&&i.View;p=k&&k.View;q=h&&h.List;r=h&&h.Seq;s=i&&i.Pervasives;t=i&&i.Validation;u=k&&k.Var$1;v=k&&k.Submitter;w=h&&h.Remoting;x=w&&w.AjaxRemotingProvider;y=h&&h.Concurrency;d=c.Species=g.Class({toString:function(){return this.$==1?"dog":this.$==2?"piglet":"cat";}},null,d);d.Piglet=new d({$:2});d.Dog=new d({$:1});d.Cat=new d({$:0});e.New=function(z,A,B){return{species:z,name:A,vaccinated:B};};c.UploadForm=function(){return j.Render(g.Curried(c.RenderPerson,4),j.Run(function(z){a.alert("Species: "+a.String(z.species)+", Name: "+z.name+", Vaccinated: "+a.String(z.vaccinated));},c.FormPiglet(e.New(d.Cat,"",false))));};c.RenderPerson=function(z,A,B,C){return l.Element("div",[],[l.Element("form",[m.Create("method","POST"),m.Create("action","/"),m.Create("id","postForm")],[l.Element("div",[n.Class("form-group")],[l.Input([n.Class("form-control"),m.Create("id","exampleInputEmail1"),m.Create("placeholder","Pet name"),m.Create("name","name")],A),c.ShowErrorsFor(o.Through$1(C.view,A))]),l.Element("div",[n.Class("form-radio")],[l.Element("h4",[],[l.TextNode("Species")]),l.Element("div",[],[l.Element("label",[],[l.Radio([m.Create("type","radio"),m.Create("name","species"),m.Create("value","dog")],d.Cat,z),l.TextNode(a.String(d.Cat))]),l.Element("label",[],[l.Radio([m.Create("type","radio"),m.Create("name","species"),m.Create("value","cat")],d.Dog,z),l.TextNode(a.String(d.Dog))]),l.Element("label",[],[l.Radio([m.Create("type","radio"),m.Create("name","species"),m.Create("value","piglet")],d.Piglet,z),l.TextNode(a.String(d.Piglet))])])]),l.Element("label",[n.Class("form-check")],[l.CheckBox([m.Create("name","vaccinated")],B),l.TextNode("Vaccinated")]),l.Element("div",[],[l.Button("Submit",[],function(){C.Trigger();})])])]);};c.ShowErrorsFor=function(z){return l.EmbedView(p.Map(function(A){var B;return A.$==1?(B=A.$0,l.Concat(q.ofSeq(r.delay(function(){return r.map(function(C){return l.Element("p",[m.Create("style","color:red")],[l.TextNode(C.message)]);},B);})))):l.get_Empty();},z));};c.RenderForm=function(z,A,B){return l.Element("div",[],[l.Concat([l.Element("label",[],[l.Radio([],d.Cat,z),l.TextNode(a.String(d.Cat))]),l.Element("label",[],[l.Radio([],d.Dog,z),l.TextNode(a.String(d.Dog))]),l.Element("label",[],[l.Radio([],d.Piglet,z),l.TextNode(a.String(d.Piglet))])]),l.Input([],A),l.CheckBox([],B)]);};c.FormPiglet=function(z){return j.WithSubmit(s.op_LessMultiplyGreater(s.op_LessMultiplyGreater(s.op_LessMultiplyGreater(j.Return(g.Curried3(e.New)),j.Yield(z.species)),t.IsNotEmpty("Please enter your pet's name.",j.Yield(z.name))),j.Yield(z.vaccinated)));};c.Main=function(){var z,A,B;z=u.Create$1("");A=v.CreateOption(z.get_View());B=p.MapAsync(function(C){var D;return C!=null&&C.$==1?(new x.New()).Async("med:med.Server.DoSomething:-1840423385",[C.$0]):(D=null,y.Delay(function(){return y.Return("");}));},A.view);return l.Element("div",[],[l.Input([],z),l.Button("Send",[],function(){A.Trigger();}),l.Element("hr",[],[]),l.Element("h4",[m.Create("class","text-muted")],[l.TextNode("The server responded:")]),l.Element("div",[m.Create("class","jumbotron")],[l.Element("h1",[],[l.TextView(B)])])]);};}(self));
