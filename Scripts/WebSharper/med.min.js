(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;b=a.med=a.med||{};c=b.Client=b.Client||{};d=c.Species=c.Species||{};e=c.Pet=c.Pet||{};f=c.TransmitionType=c.TransmitionType||{};g=c.ClassificationType=c.ClassificationType||{};h=c.ImageData=c.ImageData||{};i=a.IntelliFactory;j=i&&i.Runtime;k=a.WebSharper;l=k&&k.Forms;m=l&&l.Form;n=k&&k.UI;o=n&&n.Var$1;p=n&&n.View;q=n&&n.Submitter;r=k&&k.Concurrency;s=n&&n.Doc;t=n&&n.AttrProxy;u=n&&n.AttrModule;v=l&&l.View;w=l&&l.Pervasives;x=l&&l.Validation;y=k&&k.List;z=k&&k.Seq;A=k&&k.Remoting;B=A&&A.AjaxRemotingProvider;d=c.Species=j.Class({toString:function(){return this.$==1?"dog":this.$==2?"piglet":"cat";}},null,d);d.Piglet=new d({$:2});d.Dog=new d({$:1});d.Cat=new d({$:0});e.New=function(C,D,E){return{species:C,name:D,vaccinated:E};};f=c.TransmitionType=j.Class({toString:function(){return this.$==1?"Wavelet":this.$==2?"Average values":this.$==3?"Variance values":"FFT";}},null,f);f.Variance=new f({$:3});f.Average=new f({$:2});f.Wavelet=new f({$:1});f.FFT=new f({$:0});g=c.ClassificationType=j.Class({toString:function(){return this.$==1?"Neural Network":"K-means";}},null,g);g.NeuralNetwork=new g({$:1});g.KMeans=new g({$:0});h.New=function(C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R){return{imagePath:C,cutImageWithCoordsFromAnnotations:D,annotationsPath:E,transmitionType:F,classificationType:G,setIndexes:H,indexes:I,windowSize:J,stepSize:K,numberOfClusters:L,variancePercentage:M,showOriginalImage:N,showSegmentedOriginalImage:O,showClickableCutImage:P,showAverageValuesForFFT:Q,showVarianceValuesForFFT:R};};c.UploadForm=function(){return m.Render(j.Curried(c.RenderForm,4),m.Run(function(C){a.alert("Species: "+a.String(C.species)+", Name: "+C.name+", Vaccinated: "+a.String(C.vaccinated));},c.FormPiglet(e.New(d.Cat,"",false))));};c.ProcessImage=function(){var C,D,E,F,G,H,I;C=o.Create$1("");D=o.Create$1(true);E=p.Map(function(J){return J?"hidden":"";},D.get_View());F=o.Create$1(null);G=o.Create$1("");H=q.CreateOption(F.get_View());I=p.MapAsync(function(J){var K,L,M;return J!=null&&J.$==1?(K=J.$0,(L=null,r.Delay(function(){return r.Return("Show original image: "+a.String(K.showOriginalImage));}))):(M=null,r.Delay(function(){return r.Return("No data");}));},H.view);return s.Element("div",[],[s.Input([],C),s.Button("Send",[],function(){H.Trigger();}),s.Element("hr",[],[]),s.Element("h4",[t.Create("class","text-muted")],[s.TextNode("The server responded:")]),s.Element("div",[t.Create("class","jumbotron")],[s.Element("h1",[],[s.TextView(I)])]),c.ImageForm(function(J){F.Set(J);G.Set("data:image/png;base64,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");D.Set(false);}),s.Element("img",[u.Dynamic("class",E),t.Create("alt","res"),u.Dynamic("src",G.get_View())],[])]);};c.ImageForm=function(C){return m.Render(j.Curried(c.RenderImage,17),m.Run(function(D){C(D);},c.IamgePiglet(h.New("",true,"",f.FFT,g.KMeans,false,1,16,8,5,40,true,true,true,false,false))));};c.RenderPerson=function(C,D,E,F){return s.Element("div",[],[s.Element("form",[t.Create("method","POST"),t.Create("action","/"),t.Create("id","postForm")],[s.Element("div",[u.Class("form-group")],[s.Input([u.Class("form-control"),t.Create("id","exampleInputEmail1"),t.Create("placeholder","Pet name"),t.Create("name","name")],D),c.ShowErrorsFor(v.Through$1(F.view,D))]),s.Element("div",[u.Class("form-radio")],[s.Element("h4",[],[s.TextNode("Species")]),s.Element("div",[],[s.Element("label",[],[s.Radio([t.Create("type","radio"),t.Create("name","species"),t.Create("value","dog")],d.Cat,C),s.TextNode(a.String(d.Cat))]),s.Element("label",[],[s.Radio([t.Create("type","radio"),t.Create("name","species"),t.Create("value","cat")],d.Dog,C),s.TextNode(a.String(d.Dog))]),s.Element("label",[],[s.Radio([t.Create("type","radio"),t.Create("name","species"),t.Create("value","piglet")],d.Piglet,C),s.TextNode(a.String(d.Piglet))])])]),s.Element("label",[u.Class("form-check")],[s.CheckBox([t.Create("name","vaccinated")],E),s.TextNode("Vaccinated")]),s.Element("div",[],[s.Button("Submit",[],function(){F.Trigger();})])])]);};c.RenderImage=function(C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S){return s.Element("div",[],[s.Element("h2",[],[s.TextNode("Settings:")]),s.Element("div",[u.Class("flex-start mb-2")],[s.Element("label",[t.Create("class","custom-file-label")],[s.TextNode("Image: ")]),s.Input([t.Create("type","file"),t.Create("class","form-control file-input"),t.Create("aria-label","Upload")],C)]),s.Element("div",[u.Class("form-check mb-2")],[s.CheckBox([u.Class("form-check-input")],D),s.Element("label",[u.Class("ml-5")],[s.TextNode("Cut image with coordinates from annotations.xml?")])]),s.Element("div",[u.Class("flex-start mb-2")],[s.Element("label",[t.Create("class","custom-file-label")],[s.TextNode("annotations.xml file: ")]),s.Input([t.Create("type","file"),t.Create("class","form-control file-input"),t.Create("aria-label","Upload")],E)]),s.Element("div",[u.Class("flex-start fai-st")],[s.Element("div",[],[s.Element("label",[],[s.TextNode("Trasmition type: "),s.Concat([s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],f.FFT,F),s.TextNode(a.String(f.FFT))]),s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],f.Wavelet,F),s.TextNode(a.String(f.Wavelet))]),s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],f.Average,F),s.TextNode(a.String(f.Average))]),s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],f.Variance,F),s.TextNode(a.String(f.Variance))])])])]),s.Element("div",[u.Class("ml-10")],[s.Element("label",[],[s.TextNode("Classification type: "),s.Concat([s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],g.KMeans,G),s.TextNode(a.String(g.KMeans))]),s.Element("label",[u.Class("form-checkBox form-check")],[s.Radio([u.Class("form-check-input"),t.Create("type","radio")],g.NeuralNetwork,G),s.TextNode(a.String(g.NeuralNetwork))])])])])]),s.Element("div",[u.Class("form-group flex-start ")],[s.Element("div",[u.Class("form-check")],[s.CheckBox([t.Create("id","setIndexes"),u.Class("form-check-input")],H),s.Element("label",[u.Class("ml-5")],[s.TextNode("Set indexes manually?")])]),s.Element("div",[u.Class("flex-start"),t.Create("id","indexes")],[s.Element("label",[u.Class("ml-15 disabled")],[s.TextNode("Indexes: ")]),s.IntInputUnchecked([u.Class("form-control form-input"),t.Create("disabled","true")],I)]),c.ShowErrorsFor(v.Through$1(S.view,I))]),s.Element("div",[u.Class("form-group mb-2")],[s.Element("label",[u.Class("flex-start")],[s.TextNode("Window size: "),s.IntInputUnchecked([u.Class("form-control form-input")],J)]),c.ShowErrorsFor(v.Through$1(S.view,J))]),s.Element("div",[u.Class("form-group mb-2")],[s.Element("label",[u.Class("flex-start")],[s.TextNode("Step size: "),s.IntInputUnchecked([u.Class("form-control form-input")],K)]),c.ShowErrorsFor(v.Through$1(S.view,K))]),s.Element("div",[u.Class("form-group mb-2")],[s.Element("label",[u.Class("flex-start")],[s.TextNode("Number of clusters: "),s.IntInputUnchecked([u.Class("form-control form-input")],L)]),c.ShowErrorsFor(v.Through$1(S.view,L))]),s.Element("div",[u.Class("form-group mb-2")],[s.Element("label",[u.Class("flex-start")],[s.TextNode("Variance percentage: "),s.IntInputUnchecked([u.Class("form-control form-input")],M)]),c.ShowErrorsFor(v.Through$1(S.view,M))]),s.Element("h2",[],[s.TextNode("What to show:")]),s.Element("div",[u.Class("form-check")],[s.CheckBox([u.Class("form-check-input")],N),s.Element("label",[u.Class("ml-5")],[s.TextNode("Original image")])]),s.Element("div",[u.Class("form-check")],[s.CheckBox([u.Class("form-check-input")],O),s.Element("label",[u.Class("ml-5")],[s.TextNode("Segmented original image")])]),s.Element("div",[u.Class("form-check")],[s.CheckBox([u.Class("form-check-input")],P),s.Element("label",[u.Class("ml-5")],[s.TextNode("Segmented original image")])]),s.Element("div",[u.Class("form-check")],[s.CheckBox([u.Class("form-check-input")],Q),s.Element("label",[u.Class("ml-5")],[s.TextNode("Average values for FFT sliding windows")])]),s.Element("div",[u.Class("form-check mb-3")],[s.CheckBox([u.Class("form-check-input")],R),s.Element("label",[u.Class("ml-5")],[s.TextNode("Variance values for FFT sliding windows")])]),s.Element("div",[],[s.Button("Run",[u.Class("btn btn-success ")],function(){S.Trigger();})])]);};c.IamgePiglet=function(C){return m.WithSubmit(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(m.Return(j.Curried(h.New,16)),m.Yield(C.imagePath)),m.Yield(C.cutImageWithCoordsFromAnnotations)),m.Yield(C.annotationsPath)),m.Yield(C.transmitionType)),m.Yield(C.classificationType)),m.Yield(C.setIndexes)),x.Is(function(D){return D>0;},"Integer higher than 0 expected",m.Yield(C.indexes))),x.Is(function(D){return D>0;},"Integer higher than 0 expected",m.Yield(C.windowSize))),x.Is(function(D){return D>0;},"Integer higher than 0 expected",m.Yield(C.numberOfClusters))),x.Is(function(D){return D>0;},"Integer higher than 0 expected",m.Yield(C.stepSize))),x.Is(function(D){return D>=0&&D<=100;},"Integer from 0 to 100 expected",m.Yield(C.variancePercentage))),m.Yield(C.showOriginalImage)),m.Yield(C.showSegmentedOriginalImage)),m.Yield(C.showClickableCutImage)),m.Yield(C.showAverageValuesForFFT)),m.Yield(C.showVarianceValuesForFFT)));};c.ShowErrorsFor=function(C){return s.EmbedView(p.Map(function(D){var E;return D.$==1?(E=D.$0,s.Concat(y.ofSeq(z.delay(function(){return z.map(function(F){return s.Element("p",[t.Create("style","color:red")],[s.TextNode(F.message)]);},E);})))):s.get_Empty();},C));};c.RenderForm=function(C,D,E,F){return s.Element("div",[],[s.Concat([s.Element("label",[],[s.Radio([],d.Cat,C),s.TextNode(a.String(d.Cat))]),s.Element("label",[],[s.Radio([],d.Dog,C),s.TextNode(a.String(d.Dog))]),s.Element("label",[],[s.Radio([],d.Piglet,C),s.TextNode(a.String(d.Piglet))])]),s.Element("div",[],[s.Element("label",[],[s.TextNode("name: "),s.Input([],D)])]),s.CheckBox([],E)]);};c.FormPiglet=function(C){return m.WithSubmit(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(w.op_LessMultiplyGreater(m.Return(j.Curried3(e.New)),m.Yield(C.species)),x.IsNotEmpty("Please enter your pet's name.",m.Yield(C.name))),m.Yield(C.vaccinated)));};c.Main=function(){var C,D,E;C=o.Create$1("");D=q.CreateOption(C.get_View());E=p.MapAsync(function(F){var G;return F!=null&&F.$==1?(new B.New()).Async("med:med.Server.DoSomething:-1840423385",[F.$0]):(G=null,r.Delay(function(){return r.Return("");}));},D.view);return s.Element("div",[],[s.Input([],C),s.Button("Send",[],function(){D.Trigger();}),s.Element("hr",[],[]),s.Element("h4",[t.Create("class","text-muted")],[s.TextNode("The server responded:")]),s.Element("div",[t.Create("class","jumbotron")],[s.Element("h1",[],[s.TextView(E)])])]);};}(self));
